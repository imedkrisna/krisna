<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Krisna Gupta">
<meta name="dcterms.date" content="2023-11-05">

<title>Greening the grid: The implication of aggressive emission target on Indonesian electricity generation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="green_paper_files/libs/clipboard/clipboard.min.js"></script>
<script src="green_paper_files/libs/quarto-html/quarto.js"></script>
<script src="green_paper_files/libs/quarto-html/popper.min.js"></script>
<script src="green_paper_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="green_paper_files/libs/quarto-html/anchor.min.js"></script>
<link href="green_paper_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="green_paper_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="green_paper_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="green_paper_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="green_paper_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="green_paper.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="green_paper.docx"><i class="bi bi-file-word"></i>MS Word</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Greening the grid: The implication of aggressive emission target on Indonesian electricity generation</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Krisna Gupta <a href="https://orcid.org/0000-0001-8695-0514" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="www.poltekapp.ac.id">
            Politeknik APP Jakarta
            </a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 5, 2023</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    <p>Motivation, objective, method, results, implications.</p>
  </div>
</div>

</header>

<p>kirim ke <a href="https://journal.uii.ac.id/index.php/JEP">sini</a></p>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>The importance to ramp up efforts to decarbonize Indonesian energy sector just reached a new height.The Indonesian government joined the global bandwagon of committing to a more emission reduction target. Just before the 27<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi></mi><mi>t</mi></msup><mi>h</mi></mrow><annotation encoding="application/x-tex">^th</annotation></semantics></math> session of the Conference of the PRties (COP27), The Indonesian government comitted to a more aggresive reduction of greenhouse gas (GHG) emission by 31.90% by 2030, or by 43.20% with the help of other countries <span class="citation" data-cites="budy">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>.</p>
<p>For the energy sector, the Indonesian government pledged to reduce the emission from energy sector by 12.5% or by 15.5% with the global help. Energy sector remains an important emitter of GHG in Indonesia. While the target is not as aggresive as the forestry and land use sector, the energy sector is going to account for 58.17% of the total emission in 2030 under the business as usual (BAU) projection <span class="citation" data-cites="budy">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>.</p>
<p>In the energy sector, electricity generation will play an even greater role going forward. The latest data suggests the Indonesian electricity sector to provide around 20% of the Indonesian total energy needs <span class="citation" data-cites="wahyuni moef">(<a href="#ref-wahyuni" role="doc-biblioref">Wahyuni 2022</a>; <a href="#ref-moef" role="doc-biblioref">MoEF 2021</a>)</span>. This share, however, will increase as the Indonesia nudge toward electrification of cooking and transportation <span class="citation" data-cites="budy">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>. Greening the Indonesian grid, therefore, become one of the most important challenge the Indonesian government must met to achieve the emission target <span class="citation" data-cites="paul2 budy">(<a href="#ref-paul2" role="doc-biblioref">Burke et al. 2019</a>; <a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>.</p>
<p>This paper aims to discuss the cost of the Indonesian electricity transition toward renewable under the government’s aggressive emission target. Linear optimization assume perfect substitution with constraints is chosen as the preferred method to project the cost of electricity. Linear optimization is suitable for a perfect substitution grid <span class="citation" data-cites="quant">(<a href="#ref-quant" role="doc-biblioref">Sargent and Stachurski, n.d.</a>)</span>. Moreover, the method is simple enough to replicate and provides a useful to make projection and plans given a proper parameterization and constraints.</p>
<p>findings and its implications</p>
<p>The next section discusses the literature around the new emission target and Indonesia’s electricity sector. Section 3 explains the method of choice. Section 4 discusses the results and its implications toward greening the grid, and section 5 concludes.</p>
</section>
<section id="indonesia-electricity-outlook" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="indonesia-electricity-outlook"><span class="header-section-number">2</span> Indonesia electricity outlook</h2>
<p>Just prior the COP27, Indonesia submitted an optimistic document describing its updated nationally determined contributions (NDCs) <span class="citation" data-cites="budy">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>. Indonesia pledged to reduce total emission by 31.9% under CM1 and 43.2% under CM2<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Meanwhile, the energy sector is pledged to reduce emission by 12.5% and 15.5% under CM1 and CM2 respectively.</p>
<p>Looking at a roadmap by The National Energy Council (DEN) of Indonesia, the strategy to achieve this target relies heavily on electrification of energy. According to the Indonesian government’s roadmap, Indonesia would supply 25% of the total energy from reenwables by 2030 <span class="citation" data-cites="budy">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>. On the demand side, it projects a 5.5 million of electric cars, 8.5 million of electric motorcycles, and 5 million households with induction cookers in in 2030 <span class="citation" data-cites="budy">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>.</p>
<p>Indonesians are among a relatively smaller consumers of electricity, and its use is concentrated mostly in Java island <span class="citation" data-cites="paul1">(<a href="#ref-paul1" role="doc-biblioref">Burke and Kurniawati 2018</a>)</span>. The market is dominated by the state-owned firm, <em>Perusahaan Listrik Negara</em> (PLN), in both distribution and generation <span class="citation" data-cites="budy">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>. While third-party firms is allowed to generate electricity, they must sell it to PLN as the sole distributor of electricity.</p>
<p>Electricity pricing is highly regulated by the government <span class="citation" data-cites="paul1">(<a href="#ref-paul1" role="doc-biblioref">Burke and Kurniawati 2018</a>)</span>. The electricity tariff schedule is layered and differentiated between consumers. The tariff schedule is separated by households, business, and industry. For each group, tariff is discriminated further by its maximum volt-ampere. Moreover, households are often the highest receiver of subsidy and consequently pay the lowest on electricity compared to businesses and industries <span class="citation" data-cites="paul1">(<a href="#ref-paul1" role="doc-biblioref">Burke and Kurniawati 2018</a>)</span>.</p>
<p>The road toward greening the greed seems slow. According to <span class="citation" data-cites="pln">PLN (<a href="#ref-pln" role="doc-biblioref">2021</a>)</span> statistics, the percentage of renewables generated by PLN in 2021 is only 8% (see <a href="#tbl-pln">Table&nbsp;1</a>). A large majority of the renewable electricity is sourced by hydropower and geothermal. Additionally, the growth of renewable electricity since 1998 (31.2%) is dwarfed by PLN’s total capacity growth (144.08%). Indeed, the majority of PLN’s capacity growth is from coal, defying the global trend <span class="citation" data-cites="ember paul1">(<a href="#ref-ember" role="doc-biblioref">Lolla and Yang 2021</a>; <a href="#ref-paul1" role="doc-biblioref">Burke and Kurniawati 2018</a>)</span>.</p>
<div id="tbl-pln" class="anchored">
<table class="table">
<caption>Table&nbsp;1: The amount of renewable electricity by PLN (GWh)</caption>
<thead>
<tr class="header">
<th>source</th>
<th>1998 (GWh)</th>
<th>2021 (GWh)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Hydro</td>
<td>9,649.00</td>
<td>11,869.30</td>
</tr>
<tr class="even">
<td>Geothermal 2,616.80</td>
<td>4,216.17</td>
<td></td>
</tr>
<tr class="odd">
<td>Solar</td>
<td>-</td>
<td>5.63</td>
</tr>
<tr class="even">
<td>Wind</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
</div>
<p>The slow growth of renewables stem from the Indonesian’s reliance on coal <span class="citation" data-cites="budy paul2">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>; <a href="#ref-paul2" role="doc-biblioref">Burke et al. 2019</a>)</span>. Coal is cheap, abundant, and reliable, reducing the incentives to look for alternative. Moreover, PLN’s pricing is highly regulated by the government. Meaning, already relatively low, Indonesian electricity price cannot be raised by PLN when it is needed. The Indonesian government also would like to limit subsidy, leading to further reliance on coal <span class="citation" data-cites="budy">(<a href="#ref-budy" role="doc-biblioref">Resosudarmo, Rezki, and Effendi 2023</a>)</span>.</p>
<p>While the PLN’s renewable accounts for only 8% of total PLN generation, renewable accounts for 17% of total general electricity generation <span class="citation" data-cites="ember">(<a href="#ref-ember" role="doc-biblioref">Lolla and Yang 2021</a>)</span>. This majority of the discrepancy may come from third party generation. In 2021, around 36.79% of the Indonesian electricity is generated by third party, which is only 3.78% in 1998. This shows the importance of third party generators for improving the Indonesian renewable electricity capacity. But the growth of third-party generators is also hindered.</p>
<p>The rise of third party generator for renewables rises in 2013 when the government announced reverse auction for solar panel <span class="citation" data-cites="paul2">(<a href="#ref-paul2" role="doc-biblioref">Burke et al. 2019</a>)</span>. However, a limitation imposed on foreign involvement in both investment and product components as well as low administrative capacity slow down the growth <span class="citation" data-cites="paul2">(<a href="#ref-paul2" role="doc-biblioref">Burke et al. 2019</a>)</span>. Moreover, some projects are too expensive for PLN. Since it does not control price, it cannot impose a premium pricing for some electricity. Lastly, an overcapacity of coal electricity leads PLN to slow down its third-party purchases of renewables. Direct competition with PLN’s own asset is also a known problem in supporting renewable electricity <span class="citation" data-cites="paul2">(<a href="#ref-paul2" role="doc-biblioref">Burke et al. 2019</a>)</span>.</p>
<p>In short, financial capacity needs to be improved. PLN’s lack of pricing prower and subsidies limit its capacity to invest and absorb energy invested by third party generators. It may need to early-retire a large number of coal powerplant. The government also need to improve grid infrastructure and general project infrastructure to lower the cost of building new renewable generators and its transmission. According to <span class="citation" data-cites="memr">MEMR (<a href="#ref-memr" role="doc-biblioref">2020</a>)</span>, Indonesia needs Rp 3,500 trillion ($0.23 trillion) to achieve its NDCs targets.</p>
<p>Some of the money will come from the newly set carbon market.</p>
</section>
<section id="simulation" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="simulation"><span class="header-section-number">3</span> Simulation</h2>
<section id="method" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="method"><span class="header-section-number">3.1</span> Method</h3>
<p>Let <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Q</mi><annotation encoding="application/x-tex">Q</annotation></semantics></math> be a quantity produced by the Indonesian economy which is nested with a leontief production function with energy. That is, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>=</mo><mo>min</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>.</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mi>G</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>ω</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Q=\min (F(.),G(\omega))</annotation></semantics></math>, where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>F</mi><annotation encoding="application/x-tex">F</annotation></semantics></math> is a combination of factors such as capital and labour. Let <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Ω</mi><annotation encoding="application/x-tex">\Omega</annotation></semantics></math> be the total energy required to produce <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Q</mi><annotation encoding="application/x-tex">Q</annotation></semantics></math> in one period. The economy produces <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ω</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math> with a fully substitute sources:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi><mo>=</mo><msub><mi>w</mi><mi>a</mi></msub><mo>+</mo><msub><mi>w</mi><mi>b</mi></msub><mo>+</mo><msub><mi>w</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">
\omega=w_a+w_b+w_g
</annotation></semantics></math></p>
<p>where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>w</mi><mi>a</mi></msub><annotation encoding="application/x-tex">w_a</annotation></semantics></math> is the amount of clean energy used, while <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>w</mi><mi>b</mi></msub><annotation encoding="application/x-tex">w_b</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>w</mi><mi>g</mi></msub><annotation encoding="application/x-tex">w_g</annotation></semantics></math> are coal and gas respectively. if <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> is a vector of prices of the three sources of energy and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>∈</mo><mo stretchy="false" form="prefix">{</mo><msub><mi>w</mi><mi>a</mi></msub><mo>,</mo><msub><mi>w</mi><mi>b</mi></msub><mo>,</mo><msub><mi>w</mi><mi>g</mi></msub><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">w \in \{w_a,w_b,w_g\}</annotation></semantics></math>, producers in the economy are faced with a cost minimization problem to produce <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Q</mi><annotation encoding="application/x-tex">Q</annotation></semantics></math>, and by extension, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ω</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math>.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><munder><mo>min</mo><mi>w</mi></munder><mspace width="0.222em"></mspace></mtd><mtd columnalign="left" style="text-align: left"><mi>p</mi><mo>⋅</mo><mi>w</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mrow><mtext mathvariant="normal">subject to </mtext><mspace width="0.333em"></mspace></mrow><mspace width="0.222em"></mspace></mtd><mtd columnalign="left" style="text-align: left"><mi>ω</mi><mo>=</mo><msub><mi>w</mi><mi>a</mi></msub><mo>+</mo><msub><mi>w</mi><mi>b</mi></msub><mo>+</mo><msub><mi>w</mi><mi>g</mi></msub></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
\min_{w} \ &amp;  p \cdot w \\
\mbox{subject to } \ &amp; \omega=w_a+w_b+w_g
\end{aligned}
</annotation></semantics></math></p>
<p>In this setting, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ω</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math> is taken as exogenous as the consequence of the Leontief production nest. That is, factor of production is the driver of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Q</mi><annotation encoding="application/x-tex">Q</annotation></semantics></math> and consequently <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ω</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math>. This assumption allows the use of the cost minimization technique and observe the cost impact of idiosyncratic shock to prices.</p>
<p>We improve this setting by adding emission constraints. We limit total emission coming from the use of each source of energy. Next, we limit how much the total combination of emissions from these sources is allowed. This variable, then, can be set exogenously to reflect the government’s preference of emission.</p>
<p>Let <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">a,b,g</annotation></semantics></math> be parameters which reflect emission generated per megawatt hour by <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>a</mi></msub><mo>,</mo><msub><mi>w</mi><mi>b</mi></msub><mo>,</mo><msub><mi>w</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">w_a, w_b, w_g</annotation></semantics></math> respectively. Let <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ε</mi><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math> be the total emission generated by the Indonesian electricity sector, Then the total emission generated by these sources is:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><msub><mi>w</mi><mi>a</mi></msub><mo>+</mo><mi>b</mi><msub><mi>w</mi><mi>b</mi></msub><mo>+</mo><mi>g</mi><msub><mi>w</mi><mi>g</mi></msub><mo>=</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">
aw_a+bw_b+gw_g=\varepsilon
</annotation></semantics></math></p>
<p>With the above emission constraint, we have a complete linear system as follows:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><munder><mo>min</mo><mi>W</mi></munder><mspace width="0.222em"></mspace></mtd><mtd columnalign="left" style="text-align: left"><mi>p</mi><mo>⋅</mo><mi>w</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mrow><mtext mathvariant="normal">subject to </mtext><mspace width="0.333em"></mspace></mrow><mspace width="0.222em"></mspace></mtd><mtd columnalign="left" style="text-align: left"><msub><mi>w</mi><mi>a</mi></msub><mo>+</mo><msub><mi>w</mi><mi>b</mi></msub><mo>+</mo><msub><mi>w</mi><mi>G</mi></msub><mo>≥</mo><mi>ω</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><mi>a</mi><msub><mi>w</mi><mi>a</mi></msub><mo>+</mo><mi>b</mi><msub><mi>w</mi><mi>b</mi></msub><mo>+</mo><mi>g</mi><msub><mi>w</mi><mi>g</mi></msub><mo>≤</mo><mi>ε</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><msub><mi>w</mi><mi>a</mi></msub><mo>,</mo><msub><mi>w</mi><mi>b</mi></msub><mo>,</mo><msub><mi>w</mi><mi>g</mi></msub><mo>≥</mo><mn>0</mn></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
\min_{W} \ &amp;  p \cdot w \\
\mbox{subject to } \ &amp; w_a+ w_b+ w_G \ge \omega \\
 &amp; aw_a+bw_b+gw_g \le \varepsilon \\
 &amp; w_a,w_b,w_g \ge 0\\
\end{aligned}
</annotation></semantics></math></p>
<p>The shock of the model can come from two exogenous variables <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> which reflects a carbon tax, or <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ε</mi><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math> which reflects how much carbon quota is given in the economy as a whole.</p>
<p>The next step is to find a representative parameter. <span class="citation" data-cites="pln">PLN (<a href="#ref-pln" role="doc-biblioref">2021</a>)</span> is the main source of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ω</mi><annotation encoding="application/x-tex">\omega</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>⋅</mo><mi>w</mi></mrow><annotation encoding="application/x-tex">p \cdot w</annotation></semantics></math>. Perusahaan Listrk Negara (PLN) statistics is reliable since it is the sole distributor of electricity in Indonesia. According to <span class="citation" data-cites="pln">PLN (<a href="#ref-pln" role="doc-biblioref">2021</a>)</span>, Indonesia generates 279,511.24 Gigawatt hour (GWh) in 2021. From those, around 60% are produced using coal as its main source and around 23% by some mixes of fossil fuels. Only 17% is generated by renewables, mostly hydroelectric <span class="citation" data-cites="ember pln">(<a href="#ref-ember" role="doc-biblioref">Lolla and Yang 2021</a>; <a href="#ref-pln" role="doc-biblioref">PLN 2021</a>)</span>.</p>
<p><span class="citation" data-cites="pln">PLN (<a href="#ref-pln" role="doc-biblioref">2021</a>)</span> also contains data on prices per Kilowatt hour of electricity based on sources. Total emission generated by the electricity sector is calculated based on the emission factor and how much energy source is used by the sector. Lastly, emission factor <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">a,b,g</annotation></semantics></math> are calibrated from <span class="citation" data-cites="febijanto10">Febijanto (<a href="#ref-febijanto10" role="doc-biblioref">2010</a>)</span> and <span class="citation" data-cites="jrc">Steen (<a href="#ref-jrc" role="doc-biblioref">2021</a>)</span>. The number of emission factor varies between countries and in different reports, and emission factor in this paper tries to balance those differences<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>Also cekidot https://www.cnbcindonesia.com/news/20220119103739-4-308598/pajak-karbon-pltu-berlaku-april-2022-picu-tarif-listrik-naik</p>
<p>https://publications.jrc.ec.europa.eu/repository/handle/JRC21207</p>
<p>https://ebtke.esdm.go.id/post/2023/02/01/3414/rencana.pengembangan.pembangkit.nasional.beri.porsi.ebt.lebih.besar?lang=id</p>
</section>
<section id="results" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="results"><span class="header-section-number">3.2</span> Results</h3>
<p>The linear setting in the previous section is trivial enough to be solved by linear programming method in Scipy <span class="citation" data-cites="quant">(<a href="#ref-quant" role="doc-biblioref">Sargent and Stachurski, n.d.</a>)</span>. Four different cases are considered in this paper.</p>
<table class="table">
<colgroup>
<col style="width: 11%">
<col style="width: 38%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>case</th>
<th>description</th>
<th>model setting</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>status quo</td>
<td>current share of energy use</td>
</tr>
<tr class="even">
<td>2</td>
<td>current emission, optimized</td>
<td>current total emission, optimized</td>
</tr>
<tr class="odd">
<td>3</td>
<td>carbon tax</td>
<td>current share but carbon is taxed</td>
</tr>
<tr class="even">
<td>4</td>
<td>long-run with aggresive target</td>
<td>like case 2 but with emission reduced by 27%</td>
</tr>
<tr class="odd">
<td>5</td>
<td>long-run with renewable constraint</td>
<td>case 4 with renewable contraint</td>
</tr>
</tbody>
</table>
<p>Case 1: status quo</p>
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-stdout">
<pre><code>The total cost of electricity generation is 262.29 trillion IDR or 906.11 IDR/KWh
The total emission is 225,208,103,460.00 kgCO2
Total electricity generated from renewables is 49,209,996.90 MWh (17.00 %)
Total electricity generated from coal is 173,682,342.00 MWh (60.00 %)
Total electricity generated from other fossil fuels is 66,578,231.10 MWh (23.00 %)</code></pre>
</div>
</div>
<p>case 2: minimized cost, same emission (no target)</p>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-stdout">
<pre><code>The total cost of electricity generation is 237.36 trillion IDR or 819.96 IDR/KWh
The total emission is 225,208,103,460.00 kgCO2
Total electricity generated from renewables is 71,402,740.60 MWh (24.67 %)
Total electricity generated from coal is 218,067,829.40 MWh (75.33 %)
Total electricity generated from other fossil fuels is 0.00 MWh (0.00 %)</code></pre>
</div>
</div>
<p>case 3: carbon tax</p>
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-stdout">
<pre><code>The total cost of electricity generation is 266.48 trillion IDR or 920.59 IDR/KWh
The total emission is 225,208,103,460.00 kgCO2
Total electricity generated from renewables is 71,402,740.60 MWh (24.67 %)
Total electricity generated from coal is 218,067,829.40 MWh (75.33 %)
Total electricity generated from other fossil fuels is 0.00 MWh (0.00 %)</code></pre>
</div>
</div>
<p>case 4: aggresive carbon cap</p>
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-stdout">
<pre><code>The total cost of electricity generation is 282.89 trillion IDR or 977.26 IDR/KWh
The total emission is 158,745,613,645.60 kgCO2
Total electricity generated from renewables is 145,249,951.50 MWh (50.18 %)
Total electricity generated from coal is 144,220,618.50 MWh (49.82 %)
Total electricity generated from other fossil fuels is 0.00 MWh (0.00 %)</code></pre>
</div>
</div>
<p>case 5: non-aggresive transition</p>
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-stdout">
<pre><code>The total cost of electricity generation is 351.87 trillion IDR or 1,215.57 IDR/KWh
The total emission is 158,745,613,645.60 kgCO2
Total electricity generated from renewables is 83,853,372.00 MWh (28.97 %)
Total electricity generated from coal is 21,427,459.49 MWh (7.40 %)
Total electricity generated from other fossil fuels is 184,189,738.51 MWh (63.63 %)</code></pre>
</div>
</div>
<p>bangke <code>{python} case5.biaya()</code> anjay</p>
</section>
</section>
<section id="challenges" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="challenges"><span class="header-section-number">4</span> Challenges</h2>
<p>on PV and wind <span class="citation" data-cites="paul2">Burke et al. (<a href="#ref-paul2" role="doc-biblioref">2019</a>)</span></p>
<p>cap-n-trade Some shit from <span class="citation" data-cites="SEBK17">Sabzevar et al. (<a href="#ref-SEBK17" role="doc-biblioref">2017</a>)</span> and <span class="citation" data-cites="HDZ17">He, Dou, and Zhang (<a href="#ref-HDZ17" role="doc-biblioref">2017</a>)</span> on calculation of cap n trade.</p>
</section>
<section id="conclusion" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">5</span> Conclusion</h2>
<p>aowkaowkaowk</p>
</section>
<section id="bibliography" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="bibliography">Bibliography</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-paul1" class="csl-entry" role="listitem">
Burke, Paul J., and Sandra Kurniawati. 2018. <span>“Electricity Subsidy Reform in Indonesia: Demand-Side Effects on Electricity Use.”</span> <em>Energy Policy</em> 116: 410–21. https://doi.org/<a href="https://doi.org/10.1016/j.enpol.2018.02.018">https://doi.org/10.1016/j.enpol.2018.02.018</a>.
</div>
<div id="ref-paul2" class="csl-entry" role="listitem">
Burke, Paul J., Jinnie Widnyana, Zeba Anjum, Emma Aisbett, Budy Resosudarmo, and Kenneth G. H. Baldwin. 2019. <span>“Overcoming Barriers to Solar and Wind Energy Adoption in Two Asian Giants: India and Indonesia.”</span> <em>Energy Policy</em> 132: 1216–28. https://doi.org/<a href="https://doi.org/10.1016/j.enpol.2019.05.055">https://doi.org/10.1016/j.enpol.2019.05.055</a>.
</div>
<div id="ref-febijanto10" class="csl-entry" role="listitem">
Febijanto, Irhan. 2010. <span>“Perhitungan Faktor Emisi Di Sistem Jaringan Ketenagalistrikan Jawa-Madura-Bali.”</span> <em>Jurnal Teknologi Lingkungan BPPT</em> 11 (2): 227–37. <a href="https://doi.org/10.29122/jtl.v11i2.1207">https://doi.org/10.29122/jtl.v11i2.1207</a>.
</div>
<div id="ref-HDZ17" class="csl-entry" role="listitem">
He, Ping, Guowei Dou, and Wei Zhang. 2017. <span>“Optimal Production Planning and Cap Setting Under Cap-and-Trade Regulation.”</span> <em>The Journal of the Operational Research Society</em> 68 (9): 1094–1105. https://doi.org/<a href="https://doi.org/10.1057/s41274-016-0123-1">https://doi.org/10.1057/s41274-016-0123-1</a>.
</div>
<div id="ref-ember" class="csl-entry" role="listitem">
Lolla, Aditya, and Muyi Yang. 2021. <span>“Indonesia: Indonesia Defies Global Trend with More Coal in the Generation-Mix.”</span> ember-climate; Global Electricity Review 2021: G20 profile.
</div>
<div id="ref-memr" class="csl-entry" role="listitem">
MEMR. 2020. <span>“Turunkan Emisi 314 Juta Ton CO2 Tahun 2030,indonesia Perlu Investasi Rp 3.500 Triliun.”</span> Ministry of Energy and Mineral Resources. <a href="https://ebtke.esdm.go.id/post/2020/08/24/2613/turunkan.emisi.314.juta.ton.co2.tahun.2030.indonesia.perlu.investasi.rp.3.500.triliun#:~:text=%22Pemerintah%20telah%20mencanangkan%20target%20penurunan%20emisi%20gas%20rumah,2030%20dengan%20estimasi%20kebutuhan%20investasi%20sebesar%20Rp3.500%20triliun.">https://ebtke.esdm.go.id/post/2020/08/24/2613/turunkan.emisi.314.juta.ton.co2.tahun.2030.indonesia.perlu.investasi.rp.3.500.triliun#:~:text=%22Pemerintah%20telah%20mencanangkan%20target%20penurunan%20emisi%20gas%20rumah,2030%20dengan%20estimasi%20kebutuhan%20investasi%20sebesar%20Rp3.500%20triliun.</a>
</div>
<div id="ref-moef" class="csl-entry" role="listitem">
MoEF. 2021. <span>“Indonesia Third Biennial Update Report.”</span> Ministry of Environment and Forestry. <a href="https://unfccc.int/sites/default/files/resource/IndonesiaBUR%203_FINAL%20REPORT_2.pdf">https://unfccc.int/sites/default/files/resource/IndonesiaBUR%203_FINAL%20REPORT_2.pdf</a>.
</div>
<div id="ref-pln" class="csl-entry" role="listitem">
PLN. 2021. <span>“Statistik PLN.”</span> 01001-220630. Perusahaan Listrik Negara.
</div>
<div id="ref-budy" class="csl-entry" role="listitem">
Resosudarmo, Budy P., Jahen F. Rezki, and Yuventus Effendi. 2023. <span>“Prospects of Energy Transition in Indonesia.”</span> <em>Bulletin of Indonesian Economic Studies</em> 59 (2): 149–77. <a href="https://doi.org/10.1080/00074918.2023.2238336">https://doi.org/10.1080/00074918.2023.2238336</a>.
</div>
<div id="ref-SEBK17" class="csl-entry" role="listitem">
Sabzevar, Nikoo, S. T. Enns, Joule Bergerson, and Janne Kettunen. 2017. <span>“Modeling Competitive Firms’ Performance Under Price-Sensitive Demand and Cap-and-Trade Emissions Constraints.”</span> <em>International Journal of Production Economics</em> 184: 193–209. https://doi.org/<a href="https://doi.org/10.1016/j.ijpe.2016.10.024">https://doi.org/10.1016/j.ijpe.2016.10.024</a>.
</div>
<div id="ref-quant" class="csl-entry" role="listitem">
Sargent, Thomas J., and John Stachurski. n.d. <span>“Intermediate Quantitative Economics with Python.”</span> quantecon.org.
</div>
<div id="ref-jrc" class="csl-entry" role="listitem">
Steen, M. 2021. <span>“Greenhouse Gas Emissions from Fossil Fuel Fired Power Generation Systems.”</span> JRC21207. JRC Publications Repository. <a href="https://publications.jrc.ec.europa.eu/repository/handle/JRC21207">https://publications.jrc.ec.europa.eu/repository/handle/JRC21207</a>.
</div>
<div id="ref-wahyuni" class="csl-entry" role="listitem">
Wahyuni, Elisa. 2022. <span>“Challenges in Facing Indonesia’s Energy Commitment.”</span> In <em>Indonesia Post-Pandemic Outlook: Strategy Towards Net-Zero Emissions by 2060 from the Renewables and Carbon-Neutral Energy Perspectives</em>, edited by H. Ardiansyah and P. Ekadewi, 23–40. BRIN Publishing. <a href="https://doi.org/10.55981/brin.562.c3">https://doi.org/10.55981/brin.562.c3</a>.
</div>
</div>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>CM1 = Counter Measure 1 (without international support), while CM2 = counter measure 2 (with international support).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The Indonesian electricity generation grows by 271,58% between 1998-2021. The largest growth comes from third-party grows from 2,938.76 GWh in 1998 to 106,496.69 GWh in 2021.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{gupta2023,
  author = {Gupta, Krisna},
  title = {Greening the Grid: {The} Implication of Aggressive Emission
    Target on {Indonesian} Electricity Generation},
  date = {2023-11-05},
  langid = {en},
  abstract = {Motivation, objective, method, results, implications.}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-gupta2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Gupta, Krisna. 2023. <span>“Greening the Grid: The Implication of
Aggressive Emission Target on Indonesian Electricity Generation.”</span>
Working Paper. November 5, 2023.
</div></div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>